{"version":3,"sources":["components/ToastContainer/styles.ts","components/ToastContainer/index.tsx","context/ToastContext.tsx","pages/SignIn/styles.ts","services/api.ts","context/AuthContext.tsx","pages/SignIn/index.tsx","styles/global.ts","context/index.tsx","App.tsx","index.tsx"],"names":["Container","styled","div","Toast","ToastContainer","messages","removeToast","useToast","map","message","key","id","type","size","title","description","onClick","ToastContext","createContext","ToastProvider","children","useState","setMessages","addToast","useCallback","toast","state","filter","Provider","value","context","useContext","Error","Header","h1","Input","Content","shade","api","axios","create","baseURL","AuthContext","AuthProvider","token","localStorage","getItem","user","JSON","parse","data","setData","signIn","a","email","password","post","response","setItem","stringify","signOut","removeItem","SignIn","useAuth","setEmail","setPassword","handleSubmit","e","preventDefault","uuid","setTimeout","onSubmit","name","placeholder","onChange","target","createGlobalStyle","lighten","AppProvider","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d9a3aa52.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const Container = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0;\n\n  padding: 30px;\n\n  overflow: hidden;\n`;\n\nexport const Toast = styled.div`\n  width: 360px;\n\n  position: relative;\n\n  padding: 16px 30px 16px 16px;\n\n  border-radius: 10px;\n\n  box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n\n  & + div {\n    margin-top: 8px;\n  }\n\n  background: #ebf8ff;\n  color: #3172b7;\n\n  > svg {\n    margin: 4px 12px 0 0;\n  }\n\n  div {\n    flex: 1;\n\n    p {\n      margin-top: 4px;\n      font-size: 14px;\n      opacity: 0.8;\n      line-height: 20px;\n    }\n  }\n\n  button {\n    position: absolute;\n    right: 16px;\n    top: 19px;\n    opacity: 0.8;\n    border: 0;\n    background: transparent;\n    color: inherit;\n  }\n`;\n","import React from 'react';\n\nimport { FiAlertCircle, FiXCircle } from 'react-icons/fi';\nimport { Container, Toast } from './styles';\nimport { ToastMessage, useToast } from '../../context/ToastContext';\n\ninterface ToastContainerProps {\n  messages: ToastMessage[];\n}\n\nconst ToastContainer: React.FC<ToastContainerProps> = ({ messages }) => {\n  const { removeToast } = useToast();\n\n  return (\n    <Container>\n      {messages.map((message) => (\n        <Toast key={message.id}>\n          {message.type !== 'success' && <FiAlertCircle size={20} />}\n          <div>\n            <strong>{message.title}</strong>\n            {message.description && <p>{message.description}</p>}\n          </div>\n\n          <button onClick={() => removeToast(message.id)} type=\"button\">\n            <FiXCircle size={18} />\n          </button>\n        </Toast>\n      ))}\n    </Container>\n  );\n};\n\nexport default ToastContainer;\n","import React, { createContext, useCallback, useState, useContext } from 'react';\nimport ToastContainer from '../components/ToastContainer';\n\ninterface ToastContextData {\n  addToast(message: ToastMessage): void;\n  removeToast(id: string): void;\n}\n\nexport interface ToastMessage {\n  id: string;\n  type?: 'success' | 'Erro!' | 'info';\n  title: string;\n  description?: string;\n}\n\nconst ToastContext = createContext<ToastContextData>({} as ToastContextData);\n\nconst ToastProvider: React.FC = ({ children }) => {\n  const [messages, setMessages] = useState<ToastMessage[]>([]);\n\n  const addToast = useCallback(\n    ({ id, type, title, description }: ToastMessage) => {\n      const toast = {\n        id,\n        type,\n        title,\n        description,\n      };\n\n      setMessages((state) => [...state, toast]);\n    },\n    [],\n  );\n  const removeToast = useCallback((id: string) => {\n    setMessages((state) => state.filter((message) => message.id !== id));\n  }, []);\n\n  return (\n    <ToastContext.Provider value={{ addToast, removeToast }}>\n      {children}\n      <ToastContainer messages={messages} />\n    </ToastContext.Provider>\n  );\n};\n\nfunction useToast() {\n  const context = useContext(ToastContext);\n\n  if (!context) {\n    throw new Error('usetoast must be used in context');\n  }\n\n  return context;\n}\n\nexport { ToastProvider, useToast };\n","import styled from 'styled-components';\nimport { shade } from 'polished';\n\nexport const Container = styled.div`\n  height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  width: 100%;\n`;\n\nexport const Header = styled.h1`\n  font-family: 'Roboto' sans-serif;\n  font-size: 52px;\n  color: #225588;\n  margin-top: 50px;\n`;\n\nexport const Input = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  background: #445566;\n  border-radius: 10px;\n  border: 2px solid #445566;\n  color: #fff;\n\n  padding: 16px;\n  width: 100%;\n\n  & + div {\n    margin-top: 18px;\n  }\n`;\n\nexport const Content = styled.div`\n  width: 100%;\n  max-width: 700px;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  form {\n    margin: 80px 0;\n    width: 340px;\n    text-align: center;\n\n    h1 {\n      margin-bottom: 24px;\n      color: #225588;\n    }\n\n    input {\n      background: transparent;\n      /* border-radius: 10px; */\n      border: 2px solid #445566;\n      color: #fff;\n\n      margin-left: 10px;\n      /* padding: 16px; */\n      width: 100%;\n\n      & + input {\n        margin-top: 8px;\n      }\n\n      ::placeholder {\n        color: #fff;\n      }\n    }\n\n    button {\n      background: #225588;\n      height: 56px;\n      border-radius: 10px;\n      border: 0;\n      padding: 0 16px;\n      color: #fff;\n      width: 100%;\n\n      font-weight: bold;\n\n      margin-top: 16px;\n      transition: background-color 0.2;\n\n      &:hover {\n        background: ${shade(0.2, '#225588')};\n      }\n    }\n  }\n`;\n","import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:3333',\n});\n\nexport default api;\n","import React, { createContext, useState, useCallback, useContext } from 'react';\nimport api from '../services/api';\n\ninterface AuthState {\n  token: string;\n  user: object;\n}\n\ninterface SignInCredentials {\n  email: string;\n  password: string;\n}\n\ninterface AuthContextData {\n  user: object;\n  signIn(credentials: SignInCredentials): Promise<void>;\n  signOut(): void;\n}\n\nconst AuthContext = createContext<AuthContextData>({} as AuthContextData);\n\nconst AuthProvider: React.FC = ({ children }) => {\n  const [data, setData] = useState<AuthState>(() => {\n    const token = localStorage.getItem('@doctorcourse:token');\n    const user = localStorage.getItem('@doctorcourse:user');\n\n    if (token && user) {\n      return { token, user: JSON.parse(user) };\n    }\n\n    return {} as AuthState;\n  });\n\n  const signIn = useCallback(async ({ email, password }: SignInCredentials) => {\n    const response = await api.post('sessions', { email, password });\n\n    const { token, user } = response.data;\n\n    localStorage.setItem('@doctorcourse:token', token);\n    localStorage.setItem('@doctorcourse:user', JSON.stringify(user));\n\n    setData({ token, user });\n  }, []);\n  const signOut = useCallback(() => {\n    localStorage.removeItem('@doctorcourse:token');\n    localStorage.removeItem('@doctorcourse:user');\n\n    setData({} as AuthState);\n  }, []);\n  return (\n    <AuthContext.Provider value={{ user: data.user, signIn, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nfunction useAuth(): AuthContextData {\n  const context = useContext(AuthContext);\n\n  if (!context) {\n    throw new Error('useauth must be used within a auth provider');\n  }\n  return context;\n}\n\nexport { AuthProvider, useAuth };\n","import React, { useState, useCallback } from 'react';\nimport { uuid } from 'uuidv4';\nimport { FiMail, FiLock } from 'react-icons/fi';\nimport { useToast } from '../../context/ToastContext';\nimport { Container, Header, Content, Input } from './styles';\nimport { useAuth } from '../../context/AuthContext';\n\nconst SignIn: React.FC = () => {\n  const { signIn } = useAuth();\n  const { addToast, removeToast } = useToast();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n\n      try {\n        await signIn({ email, password });\n\n        const id = uuid();\n\n        addToast({\n          id,\n          type: 'success',\n          title: 'Carregando',\n          description: '',\n        });\n\n        setTimeout(() => {\n          removeToast(id);\n        }, 2000);\n      } catch (err) {\n        addToast({\n          id: uuid(),\n          type: 'Erro!',\n          title: 'Login inv√°lido',\n          description: 'Houve um erro ao realizar o login',\n        });\n      }\n    },\n\n    [signIn, email, password, addToast, removeToast],\n  );\n\n  return (\n    <Container>\n      <Content>\n        <Header>Mallu Santos</Header>\n        <form onSubmit={handleSubmit}>\n          <h1>Entrar no sistema</h1>\n\n          <Input>\n            <FiMail size={20} />\n            <input\n              name=\"email\"\n              placeholder=\"E-mail\"\n              value={email}\n              onChange={(e: any) => setEmail(e.target.value)}\n            />\n          </Input>\n          <Input>\n            <FiLock size={20} />\n            <input\n              name=\"password\"\n              placeholder=\"Senha\"\n              type=\"password\"\n              value={password}\n              onChange={(e: any) => setPassword(e.target.value)}\n            />\n          </Input>\n          <button type=\"submit\">Entrar</button>\n        </form>\n      </Content>\n    </Container>\n  );\n};\n\nexport default SignIn;\n","import { createGlobalStyle } from 'styled-components';\nimport { lighten } from 'polished';\n\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default createGlobalStyle`\n@import url('https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap');\n\n* {\nmargin: 0;\npadding: 0;\noutline: 0;\nbox-sizing: border-box;\n}\n\n*:focus {\n  outline: 0;\n}\n\nhtml, body, #root {\n  height: 100%;\n  background: ${lighten(0.5, '#225588')};\n}\n\nbody {\n  -webkit-font-smoothing: antialised;\n}\n\nbody, input, button {\n  font: 14px 'Roboto', sans-serif;\n}\n\na {\n  text-decoration: none;\n}\n\nul {\n  list-style: none;\n}\n\nbutton {\n  cursor: pointer;\n}\n`;\n","import React from 'react';\n\nimport { AuthProvider } from './AuthContext';\nimport { ToastProvider } from './ToastContext';\n\nconst AppProvider: React.FC = ({ children }) => (\n  <AuthProvider>\n    <ToastProvider>{children}</ToastProvider>\n  </AuthProvider>\n);\n\nexport default AppProvider;\n","import React from 'react';\n\n// import { Container } from './styles';\nimport SignIn from './pages/SignIn';\n\nimport GlobalStyle from './styles/global';\n\nimport AppProvider from './context';\n\nconst App: React.FC = () => (\n  <>\n    <AppProvider>\n      <SignIn />\n    </AppProvider>\n\n    <GlobalStyle />\n  </>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}